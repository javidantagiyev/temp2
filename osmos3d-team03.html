<!DOCTYPE html>
<!--
    CSCI 2408 Computer Graphics Fall 2025
    (c)2025 by Name Surname
    Submitted in partial fulfillment of the requirements of the course.
-->
<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" >
<title>WebGL Team Project: Osmos 3D</title>

<script id="vertex-shader" type="x-shader/x-vertex">
    attribute vec3 aPosition;

    varying vec3 vNormal;
    varying vec3 vFragPos;
    varying vec2 vTexCoord;

    uniform mat4 uCTM;
    uniform vec3 uCenter;
    uniform mat4 uWorld;

    const float PI = 3.141592653589793;

    void main() {
        // Just use the vertex as is.
        gl_Position = uCTM * vec4(aPosition, 1.0);
        vFragPos = vec3(uWorld * vec4(aPosition, 1.0));
        vNormal = normalize(vFragPos - uCenter);

        float u = atan(vNormal.z, vNormal.x) / (2.0 * PI) + 0.5;
        float v = vNormal.y * 0.5 + 0.5;
        vTexCoord = vec2(u, v);
    }
</script>

<script id="fragment-shader" type="x-shader/x-fragment">
    // Set how many bits used for float values. Will not work otherwise.
    precision mediump float;

    varying vec3 vNormal;
    varying vec3 vFragPos;
    varying vec2 vTexCoord;

    uniform vec3 uAmbient;
    uniform vec3 uLightPosition;
    uniform vec3 uLightColor;
    uniform vec3 uViewerPosition;
    uniform float uShininess;
    uniform sampler2D uTexture;
    uniform bool uUseTexture;
    uniform vec3 uColor;

    void main() {
        vec3 lightDirect = normalize(uLightPosition - vFragPos);
        vec3 viewDirect = normalize(uViewerPosition - vFragPos);

        float diffuse = max(dot(vNormal, lightDirect), 0.0);
        vec3 diffuseVec = diffuse * uLightColor;

        vec3 reflectDirect = reflect(-lightDirect, viewDirect);
        float specular = pow(max(dot(viewDirect, reflectDirect), 0.0), uShininess);
        vec3 specularVec = specular*uLightColor;
        vec3 lighting = (uAmbient + diffuseVec + specularVec);

        vec3 texColor = vec3(1.0, 0.5, 0.0);
        if(uUseTexture){
            texColor = texture2D(uTexture, vTexCoord).rgb;
        }

        gl_FragColor = vec4(lighting * texColor * uColor, 0.7);
    }
</script>


<script id="skybox-vertex-shader" type="x-shader/x-vertex">
    attribute vec3 aPosition;

    varying vec3 vFragPos;
    varying vec3 vNormal;
    varying vec2 vTexCoord;

    uniform mat4 uCTM;
    uniform vec3 uCenter;
    uniform mat4 uWorld;

    const float PI = 3.141592653589793;

    void main() {
        // Just use the vertex as is.
        gl_Position = uCTM * vec4(aPosition, 1.0);

        vFragPos = vec3(uWorld * vec4(aPosition, 1.0));
        vNormal = normalize(vFragPos - uCenter);
        float u = atan(vNormal.z, vNormal.x) / (2.0 * PI) + 0.5;
        float v = vNormal.y * 0.5 + 0.5;
        vTexCoord = vec2(u, v);
    }
</script>

<script id="skybox-fragment-shader" type="x-shader/x-fragment">
    // Set how many bits used for float values. Will not work otherwise.
    precision mediump float;

    varying vec2 vTexCoord;

    uniform sampler2D uTexture;
    uniform bool uUseTexture;

    void main() {
        vec3 baseColor = vec3(1.0, 0.5, 0.0);
        if(uUseTexture){
            baseColor = texture2D(uTexture, vTexCoord).rgb;
        }
        gl_FragColor = vec4(baseColor, 1.0);
    }
</script>

<script id="skybox2-vertex-shader" type="x-shader/x-vertex">
    attribute vec3 vPosition;
    uniform mat4 uCTM;
    varying vec3 vDir;

    void main() {
        vDir = vPosition;
        gl_Position = uCTM * vec4(vPosition, 1.0);
    }
</script>

<script id="skybox2-fragment-shader" type="x-shader/x-fragment">
    precision mediump float;

    varying vec3 vDir;
    uniform sampler2D uTexture;

    const float PI = 3.14159265359;

    void main() {
        vec3 dir = normalize(vDir);

        float u = atan(dir.z, dir.x) / (2.0 * PI) + 0.5;
        float v = asin(dir.y) / PI + 0.5;

        gl_FragColor = texture2D(uTexture, vec2(u, v));
    }
</script>

<!-- Copyright (c) <2012-2015> Ed Angel and Dave Shreiner -->
<script type="text/javascript" src="common/webgl-utils.js"></script>
<script type="text/javascript" src="common/initShaders.js"></script>
<script type="text/javascript" src="common/MV.js"></script>
<!-- Copyright (c) <2012-2015> Ed Angel and Dave Shreiner -->
    <script type="text/javascript" src="camera.js"></script>
    <script type="text/javascript" src="model.js"></script>
    <script type="text/javascript" src="sphere.js"></script>
    <script type="text/javascript" src="controls.js"></script>
    <script type="text/javascript" src="lighting.js"></script>
    <script type="text/javascript" src="textures.js"></script>
    <script type="text/javascript" src="enemies.js"></script>
    <script type="text/javascript" src="player.js"></script>
    <script type="text/javascript" src="skybox.js"></script>
    <script type="text/javascript" src="game.js"></script>
    <script type="text/javascript" src="renderer.js"></script>
    <script type="text/javascript" src="osmos3d-team03.js"></script>
</head>

<body style="background-color: #888888;">

    <style>
        body {
            margin: 0;
            overflow: hidden;
            font-family: Arial, sans-serif;
        }

        #hud {
            position: absolute;
            top: 12px;
            left: 12px;
            background: rgba(0, 0, 0, 0.55);
            color: #f0f0f0;
            padding: 12px 16px;
            border-radius: 8px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.35);
            min-width: 180px;
        }

        #hud .stat {
            margin: 4px 0;
            display: flex;
            justify-content: space-between;
            font-size: 15px;
            letter-spacing: 0.3px;
        }

        #hud .label {
            color: #9dd8ff;
            margin-right: 8px;
        }

        #hud .value {
            font-weight: bold;
        }
    </style>

    <center>
        <div id="hud">
            <div class="stat"><span class="label">Score</span><span class="value" id="score-value">0</span></div>
            <div class="stat"><span class="label">Timer</span><span class="value" id="timer-value">0:00</span></div>
            <div class="stat"><span class="label">Enemies</span><span class="value" id="enemies-value">0</span></div>
        </div>
        <canvas id="gl-canvas" width="1300" height="750">
            Sorry ... your browser doesn't support the HTML5 canvas element.
        </canvas>
    </center>
</body>
</html>
